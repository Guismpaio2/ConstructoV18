<div class="main-content-container">
  <div class="page-header">
    <h1>Cadastrar Novo Item no Estoque</h1>
    <button class="btn btn-secondary" routerLink="/estoque">
      Voltar para Estoque
    </button>
  </div>

  <div class="form-card">
    <form [formGroup]="estoqueForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="produtoId">Produto:</label>
        <select id="produtoId" formControlName="produtoId" class="form-control">
          <option value="" disabled>Selecione um produto</option>
          <option
            *ngFor="let produto of produtos$ | async"
            [value]="produto.id"
          >
            {{ produto.nome }} - {{ produto.marca }} (Lote: {{ produto.lote }})
          </option>
        </select>
        <div
          *ngIf="
            estoqueForm.get('produtoId')?.invalid &&
            estoqueForm.get('produtoId')?.touched
          "
          class="error-message"
        >
          Produto é obrigatório.
        </div>
      </div>

      <div class="form-group">
        <label for="quantidade">Quantidade:</label>
        <input
          type="number"
          id="quantidade"
          formControlName="quantidade"
          class="form-control"
          placeholder="Ex: 100"
        />
        <div
          *ngIf="
            estoqueForm.get('quantidade')?.invalid &&
            estoqueForm.get('quantidade')?.touched
          "
          class="error-message"
        >
          Quantidade é obrigatória e deve ser um número positivo.
        </div>
      </div>

      <div class="form-group">
        <label for="dataValidade">Data de Validade (Opcional):</label>
        <input
          type="date"
          id="dataValidade"
          formControlName="dataValidade"
          class="form-control"
        />
      </div>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="estoqueForm.invalid"
      >
        Cadastrar Item
      </button>
    </form>
  </div>
</div>
