<div class="container mt-4">
  <h2>Registros de Baixas de Estoque</h2>

  <div class="mb-3">
    <input
      type="text"
      class="form-control"
      placeholder="Buscar por item, usuário, data..."
      [(ngModel)]="searchTerm"
      (input)="applyFilter()"
    />
  </div>

  <div class="mb-3">
    <select
      class="form-select"
      [(ngModel)]="selectedSort"
      (change)="applySort()"
    >
      <option value="">Ordenar por</option>
      <option value="dataBaixaAsc">Data da Baixa (Crescente)</option>
      <option value="dataBaixaDesc">Data da Baixa (Decrescente)</option>
      <option value="usuarioAsc">Usuário (A-Z)</option>
      <option value="usuarioDesc">Usuário (Z-A)</option>
    </select>
  </div>

  <div *ngIf="(filteredBaixas | async)?.length === 0" class="alert alert-info">
    Nenhum registro de baixa encontrado.
  </div>

  <div
    *ngIf="(filteredBaixas | async)?.length > 0"
    class="table-container mt-4"
  >
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Item do Estoque</th>
          <th>Quantidade</th>
          <th>Usuário</th>
          <th>Data da Baixa</th>
          <th>Observação</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let baixa of filteredBaixas | async">
          <td>{{ baixa.itemEstoqueId }}</td>
          <td>{{ baixa.quantidade }}</td>
          <td>{{ baixa.usuario }}</td>
          <td>{{ baixa.dataBaixa | date : "dd/MM/yyyy" }}</td>
          <td>{{ baixa.observacao }}</td>
          <td>
            <button
              class="btn btn-sm btn-danger"
              (click)="deleteBaixa(baixa.id!)"
            >
              Excluir
            </button>
          </td>
        </tr>
      </tbody>
      <tfoot *ngIf="(filteredBaixas | async)?.length === 0">
        <tr>
          <td colspan="6" class="text-center">
            Nenhum registro de baixa encontrado.
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
